<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expedia Hotel Search Results</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, Roboto, sans-serif;
      background: #fff;
      overflow-x: hidden;
    }

    .expedia-container {
      width: 100%;
      height: 100%;
      overflow-y: hidden;
    }

    .hotel-home-carousel {
      width: 100%;
      padding: 16px;
    }

    .uitk-carousel {
      position: relative;
      width: 100%;
    }

    .uitk-carousel-container {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      scroll-behavior: smooth;
      scrollbar-width: none;
      -ms-overflow-style: none;
      padding: 4px;
    }

    .uitk-carousel-container::-webkit-scrollbar {
      display: none;
    }

    .uitk-carousel-item {
      flex: 0 0 calc(25% - 12px);
      min-width: 280px;
      max-width: 320px;
    }

    @media (max-width: 1280px) {
      .uitk-carousel-item { flex: 0 0 calc(33.333% - 11px); }
    }

    @media (max-width: 1024px) {
      .uitk-carousel-item { flex: 0 0 calc(50% - 8px); }
    }

    @media (max-width: 768px) {
      .uitk-carousel-item { flex: 0 0 calc(100% - 32px); }
    }

    .carousel-card-visible {
      opacity: 1;
      transform: translateY(0);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .uitk-card {
      background: transparent;
      border-radius: 24px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
      overflow: hidden;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .uitk-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.15), 0 4px 6px rgba(0,0,0,0.1);
    }

    .uitk-layout-flex {
      display: flex;
    }

    .uitk-layout-flex-flex-direction-column {
      flex-direction: column;
    }

    .uitk-layout-flex-item-flex-shrink-0 {
      flex-shrink: 0;
    }

    .uitk-layout-flex-item-flex-grow-1 {
      flex-grow: 1;
    }

    .uitk-layout-flex-justify-content-space-between {
      justify-content: space-between;
    }

    .uitk-layout-flex-align-items-flex-start {
      align-items: flex-start;
    }

    .uitk-image {
      position: relative;
      width: 100%;
      aspect-ratio: 1 / 1;
      overflow: hidden;
      background: #f0f0f0;
    }

    .uitk-image-media {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .uitk-card-content-section {
      padding: 16px;
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    .uitk-heading-6 {
      font-size: 16px;
      font-weight: 600;
      line-height: 1.3;
      color: #1a1a1a;
      margin-bottom: 8px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      padding-right: 8px;
    }

    .uitk-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 32px;
      height: 24px;
      padding: 0 8px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .uitk-badge-positive {
      background: #008009;
      color: white;
    }

    .uitk-badge-featured {
      background: #0066cc;
      color: white;
    }

    .uitk-text {
      line-height: 1.4;
    }

    .uitk-type-500 {
      font-size: 20px;
      font-weight: 700;
      color: #1a1a1a;
    }

    .uitk-type-200 {
      font-size: 13px;
      color: #6b6b6b;
    }

    .uitk-type-300 {
      font-size: 14px;
      font-weight: 600;
    }

    .truncate {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .uitk-spacing-margin-blockend-one {
      margin-bottom: 8px;
    }

    .uitk-spacing-margin-blockend-four {
      margin-bottom: 16px;
    }

    .uitk-button-primary {
      width: 100%;
      background: #0066cc;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
      margin-top: 8px;
    }

    .uitk-button-primary:hover {
      background: #0052a3;
    }

    .uitk-carousel-controls {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
      pointer-events: none;
      z-index: 10;
    }

    .uitk-carousel-button-paging {
      pointer-events: all;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: white;
      border: 1px solid #ddd;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      margin: 0 8px;
    }

    .uitk-carousel-button-paging:hover:not(:disabled) {
      background: #f5f5f5;
      transform: scale(1.05);
    }

    .uitk-carousel-button-paging:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .uitk-carousel-button-paging-hidden {
      opacity: 0;
      pointer-events: none;
    }

    .uitk-icon {
      width: 20px;
      height: 20px;
      fill: #1a1a1a;
    }

    .uitk-card-link {
      position: absolute;
      inset: 0;
      z-index: 1;
    }

    .is-visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0,0,0,0);
      border: 0;
    }

    .price-section {
      margin-top: auto;
    }
  </style>
</head>
<body>
  <div data-testid="home-page-view" class="expedia-container">
    <div style="display: block;">
      <div data-stid="hotels-card" class="expedia-container">
        <div id="hotel-card-carousel" class="hotel-home-carousel">
          <div class="uitk-carousel no-touch items-max-height md" data-stid="carousel-wrapper">
            <div class="uitk-carousel-container use-container-sizing" data-stid="carousel-container" tabindex="0" id="carousel-container">
              <!-- Hotels will be inserted here -->
            </div>
            <div class="uitk-carousel-controls">
              <button data-stid="carousel-nav-prev" id="prev-btn" aria-label="Show previous card" type="button" class="uitk-carousel-button-paging uitk-carousel-button-paging-prev uitk-carousel-button-paging-hidden">
                <svg class="uitk-icon" aria-label="Show previous card" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <title>Show previous card</title>
                  <path d="M10.793 5a.5.5 0 0 0-.354.146l-6.146 6.147a1 1 0 0 0 0 1.414l6.146 6.147a.5.5 0 0 0 .354.146h1.914c.258 0 .385-.322.207-.5l-5.5-5.5H19.5a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H7.414l5.502-5.502c.175-.18.047-.498-.209-.498h-1.914z"></path>
                </svg>
              </button>
              <button data-stid="carousel-nav-next" id="next-btn" aria-label="Show next card" type="button" class="uitk-carousel-button-paging uitk-carousel-button-paging-next">
                <svg class="uitk-icon" aria-label="Show next card" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <title>Show next card</title>
                  <path d="m11.086 5.5 5.5 5.5H4.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h12.086l-5.505 5.505c-.172.18-.043.495.212.495h1.914a.5.5 0 0 0 .354-.146l6.146-6.147a1 1 0 0 0 0-1.414l-6.146-6.147A.5.5 0 0 0 13.207 5h-1.914c-.258 0-.385.322-.207.5z"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function() {
      const props = window.__WIDGET_PROPS__ || {};
      const { hotels = [], destination = 'Search Results', checkIn = '', checkOut = '', totalResults = 0 } = props;
      
      const container = document.getElementById('carousel-container');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');
      
      // Generate hotel cards
      hotels.forEach((hotel, index) => {
        const delay = index * 100;
        const ariaLabel = `${index + 1} out of ${hotels.length}`;
        const isHidden = index > 3 ? 'aria-hidden="true" tabindex="-1"' : '';
        
        const badgeClass = hotel.rating >= 9.0 ? 'uitk-badge-positive' : 'uitk-badge-featured';
        
        const locationHTML = hotel.neighborhood 
          ? `<div><div class="uitk-text truncate uitk-type-200 uitk-text-secondary-theme uitk-spacing uitk-spacing-margin-blockend-four">${hotel.neighborhood}</div></div>`
          : '';
        
        const card = document.createElement('div');
        card.className = 'uitk-carousel-item';
        card.setAttribute('data-stid', 'carousel-item');
        card.setAttribute('aria-label', ariaLabel);
        if (isHidden) {
          card.setAttribute('aria-hidden', 'true');
          card.setAttribute('tabindex', '-1');
        }
        
        card.innerHTML = `
          <div class="carousel-card-visible" style="transition-delay: ${delay}ms;">
            <div class="uitk-card uitk-card-roundcorner-all uitk-card-has-link carousel-card-hotel-vertical uitk-card-has-primary-theme">
              <div class="uitk-layout-flex uitk-layout-flex-flex-direction-column" style="height: 100%;">
                <div class="uitk-layout-flex-item uitk-layout-flex-item-flex-shrink-0">
                  <figure class="uitk-image uitk-card uitk-card-roundcorner-all uitk-spacing uitk-spacing-margin-blockend-one uitk-card-has-primary-theme uitk-image-ratio-1-1 uitk-image-ratio">
                    <div class="uitk-image-placeholder">
                      <img alt="${hotel.name}" class="uitk-image-media" src="${hotel.imageUrl || 'https://images.trvl-media.com/lodging/1000000/30000/27900/27865/3102f1d9.jpg?impolicy=ccrop&w=1000&h=666&q=medium'}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x400/e0e0e0/666666?text=Hotel+Image'">
                    </div>
                  </figure>
                </div>
                <div class="uitk-card-content-section uitk-card-content-section-padded carousel-card-content-section-vertical">
                  <div class="uitk-layout-flex uitk-layout-flex-flex-direction-column uitk-layout-flex-justify-content-space-between" style="height: 100%;">
                    <div class="uitk-layout-flex-item uitk-layout-flex-item-flex-grow-1">
                      <div class="uitk-layout-flex uitk-layout-flex-justify-content-space-between">
                        <div class="uitk-layout-flex uitk-layout-flex-align-items-flex-start uitk-layout-flex-justify-content-space-between uitk-layout-flex-item" style="width: 100%;">
                          <div class="uitk-layout-flex-item uitk-layout-flex-item-flex-grow-1">
                            <h3 class="uitk-heading uitk-heading-6 truncate-lines-2 uitk-spacing uitk-spacing-margin-blockend-one uitk-spacing-padding-inlineend-two" type-style-theme="standard">${hotel.name}</h3>
                            ${locationHTML}
                          </div>
                          <div class="uitk-layout-flex-item">
                            <span class="uitk-badge uitk-badge-base-small uitk-badge-base-has-text ${badgeClass}">
                              <span class="uitk-badge-base-text" aria-hidden="false">${hotel.rating.toFixed(1)}</span>
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="uitk-layout-flex-item price-section">
                      <div class="uitk-layout-flex uitk-layout-flex-flex-direction-column uitk-spacing uitk-spacing-margin-blockend-four">
                        <div class="uitk-layout-flex uitk-layout-flex-align-items-center uitk-layout-flex-gap-xsmall uitk-layout-flex-flex-wrap-wrap uitk-layout-flex-item">
                          <div class="uitk-text uitk-type-500 uitk-type-medium uitk-text-emphasis-theme uitk-layout-flex-item-align-self-flex-end uitk-layout-flex-item">$${hotel.pricePerNight.toLocaleString()} total</div>
                        </div>
                        <div class="uitk-text truncate uitk-type-200 uitk-text-secondary-theme uitk-layout-flex-item">USD â€¢ Includes taxes and fees</div>
                      </div>
                      <button aria-hidden="true" role="link" type="button" class="uitk-button uitk-button-medium uitk-button-has-text uitk-button-primary" style="z-index: 200;">
                        <div class="uitk-text uitk-type-300 uitk-text-inverse-theme">Book on Expedia</div>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <a aria-label="View details for ${hotel.name}" class="uitk-card-link">
                <span class="is-visually-hidden"></span>
              </a>
            </div>
          </div>
        `;
        
        // Add click handler
        const button = card.querySelector('.uitk-button-primary');
        const link = card.querySelector('.uitk-card-link');
        
        [button, link, card].forEach(el => {
          el.addEventListener('click', (e) => {
            e.preventDefault();
            if (window.parent && window.parent.postMessage) {
              window.parent.postMessage({
                type: 'hotel-selected',
                data: { 
                  hotelId: hotel.id, 
                  hotelName: hotel.name,
                  price: hotel.pricePerNight,
                  rating: hotel.rating
                }
              }, '*');
            }
          });
        });
        
        container.appendChild(card);
      });
      
      // Carousel navigation
      function updateButtons() {
        const scrollLeft = container.scrollLeft;
        const maxScroll = container.scrollWidth - container.clientWidth;
        
        if (scrollLeft <= 0) {
          prevBtn.classList.add('uitk-carousel-button-paging-hidden');
          prevBtn.disabled = true;
        } else {
          prevBtn.classList.remove('uitk-carousel-button-paging-hidden');
          prevBtn.disabled = false;
        }
        
        if (scrollLeft >= maxScroll - 1) {
          nextBtn.classList.add('uitk-carousel-button-paging-hidden');
          nextBtn.disabled = true;
        } else {
          nextBtn.classList.remove('uitk-carousel-button-paging-hidden');
          nextBtn.disabled = false;
        }
      }
      
      prevBtn.addEventListener('click', () => {
        const scrollAmount = container.clientWidth;
        container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
      });
      
      nextBtn.addEventListener('click', () => {
        const scrollAmount = container.clientWidth;
        container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
      });
      
      container.addEventListener('scroll', updateButtons);
      window.addEventListener('resize', updateButtons);
      
      // Initial button state
      updateButtons();
      
      // Show empty state if no hotels
      if (hotels.length === 0) {
        container.innerHTML = '<div style="text-align: center; padding: 40px; color: #999; width: 100%;">No hotels found</div>';
        prevBtn.style.display = 'none';
        nextBtn.style.display = 'none';
      }
    })();
  </script>
</body>
</html>
